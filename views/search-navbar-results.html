{{if search.HasResults}}
<div class="p-2">
    {{if search.SearchQuery}}
    <!-- Repositories Section -->
    {{with $repos := search.SearchRepositories}}
    <div class="mb-3">
        <div class="px-3 py-1 text-xs font-semibold text-primary bg-gradient-to-r from-primary/10 to-secondary/10 rounded-md mb-2 flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
            </svg>
            Repositories
        </div>
        {{range $index, $repo := $repos}}
        {{if lt $index 3}}
        <a href="{{host}}/repos/{{.ID}}" 
           class="block px-3 py-2 hover:bg-base-200 rounded-md transition-colors"
           hx-boost="true">
            <div class="flex items-center gap-2">
                <div class="avatar avatar-placeholder">
                    <div class="bg-primary/20 text-primary rounded-full w-8 h-8">
                        <span class="text-xs">{{printf "%.2s" .Name}}</span>
                    </div>
                </div>
                <div class="flex-1 min-w-0">
                    <div class="font-medium text-sm truncate">{{.Name}}</div>
                    {{if .Description}}
                    <div class="text-xs text-base-content/60 truncate">{{.Description}}</div>
                    {{end}}
                </div>
                {{if eq .Visibility "private"}}
                <span class="badge badge-ghost badge-xs">Private</span>
                {{end}}
            </div>
        </a>
        {{end}}
        {{end}}
    </div>
    {{end}}
    
    <!-- Issues Section -->
    {{with $issues := search.SearchIssues}}
    <div class="mb-3">
        <div class="px-3 py-1 text-xs font-semibold text-success bg-gradient-to-r from-success/10 to-warning/10 rounded-md mb-2 flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Issues
        </div>
        {{range $index, $issue := $issues}}
        {{if lt $index 3}}
        <a href="{{host}}/repos/{{.RepoID}}/issues/{{.ID}}" 
           class="block px-3 py-2 hover:bg-base-200 rounded-md transition-colors"
           hx-boost="true">
            <div class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-success flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <div class="flex-1 min-w-0">
                    <div class="text-sm truncate">{{.Title}}</div>
                    <div class="text-xs text-base-content/60">
                        #{{.ID}} • {{if eq .Status "open"}}Open{{else}}Closed{{end}}
                    </div>
                </div>
            </div>
        </a>
        {{end}}
        {{end}}
    </div>
    {{end}}
    
    <!-- Pull Requests Section -->
    {{with $prs := search.SearchPullRequests}}
    <div class="mb-3">
        <div class="px-3 py-1 text-xs font-semibold text-info bg-gradient-to-r from-info/10 to-accent/10 rounded-md mb-2 flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
            </svg>
            Pull Requests
        </div>
        {{range $index, $pr := $prs}}
        {{if lt $index 3}}
        <a href="{{host}}/repos/{{.RepoID}}/prs/{{.ID}}" 
           class="block px-3 py-2 hover:bg-base-200 rounded-md transition-colors"
           hx-boost="true">
            <div class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-info flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                </svg>
                <div class="flex-1 min-w-0">
                    <div class="text-sm truncate">{{.Title}}</div>
                    <div class="text-xs text-base-content/60">
                        #{{.ID}} • {{if eq .Status "open"}}Open{{else if eq .Status "merged"}}Merged{{else}}Closed{{end}}
                    </div>
                </div>
            </div>
        </a>
        {{end}}
        {{end}}
    </div>
    {{end}}
    
    <!-- Code Section -->
    {{with $code := search.SearchCodeFiles}}
    <div class="mb-3">
        <div class="px-3 py-1 text-xs font-semibold text-secondary bg-gradient-to-r from-secondary/10 to-primary/10 rounded-md mb-2 flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
            </svg>
            Code
        </div>
        {{range $index, $file := $code}}
        {{if lt $index 3}}
        <a href="{{host}}/repos/{{.RepoID}}/files/{{.FilePath}}" 
           class="block px-3 py-2 hover:bg-base-200 rounded-md transition-colors"
           hx-boost="true">
            <div class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-secondary flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <div class="flex-1 min-w-0">
                    <div class="text-sm font-medium truncate">{{.FileName}}</div>
                    <div class="text-xs text-base-content/60 truncate">{{.FilePath}}</div>
                    {{if .Snippet}}
                    <div class="text-xs text-base-content/50 truncate mt-1 font-mono">{{.Snippet}}</div>
                    {{end}}
                </div>
                {{if .Language}}
                <span class="badge badge-ghost badge-xs">{{.Language}}</span>
                {{end}}
            </div>
        </a>
        {{end}}
        {{end}}
    </div>
    {{end}}
    
    <!-- View All Results -->
    <div class="border-t border-base-300 mt-2 pt-2">
        <a href="{{host}}/search?q={{search.SearchQuery}}" 
           class="block px-3 py-2 text-sm text-primary hover:bg-base-200 rounded-md transition-colors text-center font-medium"
           hx-boost="true">
            View all results for "{{search.SearchQuery}}" →
        </a>
    </div>
    {{end}}
</div>
{{else}}
{{if search.SearchQuery}}
<div class="p-8 text-center">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-3 text-base-content/30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <p class="text-base-content/60 text-sm">No results found for "{{search.SearchQuery}}"
    <p class="text-base-content/40 text-xs mt-1">Try different keywords or check the spelling</p>
</div>
{{else}}
<div class="p-4 text-center text-base-content/50 text-sm">
    Start typing to search...
</div>
{{end}}
{{end}}
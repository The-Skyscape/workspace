<!-- Claude AI Assistant Side Panel -->
<div id="claudeSidePanel" 
     class="fixed right-0 top-0 h-screen w-96 bg-base-100 shadow-2xl transform translate-x-full transition-transform duration-300 z-50 flex flex-col"
     hx-get="{{host}}/claude/panel/content"
     hx-trigger="load"
     hx-target="#claudePanelContent"
     hx-swap="innerHTML">
  
  <!-- Panel Header -->
  <div class="flex items-center justify-between p-4 border-b">
    <h3 class="text-lg font-bold">AI Assistants</h3>
    <button onclick="toggleClaudePanel()" class="btn btn-sm btn-circle btn-ghost">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
  
  <!-- Panel Content -->
  <div id="claudePanelContent" class="flex-1 overflow-hidden flex flex-col">
    <!-- Loading spinner while content loads -->
    <div class="flex items-center justify-center h-full">
      <span class="loading loading-spinner loading-lg"></span>
    </div>
  </div>
</div>

<!-- Overlay for mobile -->
<div id="claudePanelOverlay" 
     class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"
     onclick="toggleClaudePanel()"></div>

<script>
function toggleClaudePanel() {
  const panel = document.getElementById('claudeSidePanel');
  const overlay = document.getElementById('claudePanelOverlay');
  
  if (panel.classList.contains('translate-x-full')) {
    // Open panel
    panel.classList.remove('translate-x-full');
    overlay.classList.remove('hidden');
    // Store state in localStorage
    localStorage.setItem('claudePanelOpen', 'true');
  } else {
    // Close panel
    panel.classList.add('translate-x-full');
    overlay.classList.add('hidden');
    localStorage.setItem('claudePanelOpen', 'false');
  }
}

// Restore panel state on page load
document.addEventListener('DOMContentLoaded', function() {
  if (localStorage.getItem('claudePanelOpen') === 'true') {
    const panel = document.getElementById('claudeSidePanel');
    const overlay = document.getElementById('claudePanelOverlay');
    panel.classList.remove('translate-x-full');
    overlay.classList.remove('hidden');
  }
});

// Make panel responsive
function adjustPanelWidth() {
  const panel = document.getElementById('claudeSidePanel');
  if (window.innerWidth < 768) {
    panel.classList.remove('w-96');
    panel.classList.add('w-full');
  } else if (window.innerWidth < 1024) {
    panel.classList.remove('w-full');
    panel.classList.add('w-96');
  } else {
    panel.classList.remove('w-full');
    panel.classList.add('w-96');
  }
}

window.addEventListener('resize', adjustPanelWidth);
adjustPanelWidth();
</script>
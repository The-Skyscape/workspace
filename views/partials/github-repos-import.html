<!-- GitHub Repository Import List (HTMX Partial) -->
<div class="alert alert-info">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
  </svg>
  <span>GitHub repository import requires connecting your GitHub account. Please connect your GitHub account from Settings.</span>
</div>
{{if false}}
<!-- Search Bar -->
<div class="form-control mb-4">
  <input type="text" 
         placeholder="Search repositories..." 
         class="input input-bordered w-full"
         _="on keyup 
            set searchTerm to me.value.toLowerCase()
            for repo in #repos-list .repo-item
              if repo.dataset.name.toLowerCase() contains searchTerm or 
                 repo.dataset.description.toLowerCase() contains searchTerm
                remove .hidden from repo
              else
                add .hidden to repo
              end
            end">
</div>

<!-- Repository Grid -->
<div id="repos-list" class="grid grid-cols-1 gap-3 max-h-96 overflow-y-auto">
  {{range .}}
  <div class="repo-item card bg-base-100 border border-base-300 hover:border-primary transition-colors cursor-pointer p-4"
       data-name="{{.name}}"
       data-description="{{if .description}}{{.description}}{{end}}"
       data-url="{{.html_url}}"
       _="on click 
          remove .border-primary from .repo-item in #repos-list
          remove .border-2 from .repo-item in #repos-list
          add .border-primary to me
          add .border-2 to me
          set #selected_github_url.value to my dataset.url
          set #import_repo_name.value to my dataset.name
          remove .hidden from #import-options">
    <div class="flex items-start justify-between">
      <div class="flex-1">
        <div class="flex items-center gap-2 mb-1">
          <h4 class="font-semibold text-sm">{{.name}}</h4>
          {{if .private}}
          <span class="badge badge-ghost badge-xs">Private</span>
          {{else}}
          <span class="badge badge-ghost badge-xs">Public</span>
          {{end}}
        </div>
        <p class="text-xs text-base-content/70 mb-2">
          {{if .description}}{{.description}}{{else}}No description{{end}}
        </p>
        <div class="flex items-center gap-3 text-xs text-base-content/50">
          {{if .language}}
          <span class="flex items-center gap-1">
            <span class="w-3 h-3 rounded-full bg-base-content/30"></span>
            <span>{{.language}}</span>
          </span>
          {{end}}
          <span class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
            </svg>
            <span>{{.stargazers_count}}</span>
          </span>
        </div>
      </div>
    </div>
  </div>
  {{end}}
</div>

<!-- Import Options (shown after selection) -->
<div id="import-options" class="hidden flex flex-col gap-4 mt-4">
  <!-- Repository Name (override) -->
  <label class="form-control w-full">
    <div class="label">
      <span class="label-text text-sm font-medium">Local Repository Name</span>
      <span class="label-text-alt text-xs">Optional - defaults to GitHub name</span>
    </div>
    <input type="text" id="import_repo_name" name="name" class="input input-bordered w-full"
           placeholder="Will use GitHub repository name"
           pattern="[a-zA-Z0-9][a-zA-Z0-9-_]{0,38}[a-zA-Z0-9]?" />
  </label>

  <!-- Visibility -->
  <label class="form-control w-full">
    <div class="label">
      <span class="label-text text-sm font-medium">Visibility</span>
    </div>
    <select name="visibility" class="select select-bordered w-full">
      <option value="private" selected>
        üîí Private - Only you and collaborators can access
      </option>
      <option value="public">
        üåç Public - Anyone can view this repository
      </option>
    </select>
  </label>

  <!-- Setup Integration -->
  <div class="form-control">
    <label class="label cursor-pointer">
      <span class="label-text">Set up GitHub integration for automatic sync</span>
      <input type="checkbox" name="setup_integration" checked="checked" class="checkbox checkbox-primary" />
    </label>
  </div>
</div>

{{else}}
<!-- No repositories found -->
<div class="text-center py-8">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-base-content/30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
  </svg>
  <p class="text-base-content/70">No repositories found</p>
  <p class="text-sm text-base-content/60 mt-2">Create some repositories on GitHub first</p>
</div>
{{end}}
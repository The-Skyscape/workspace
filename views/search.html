{{template "layout/start"}}

<div class="container mx-auto max-w-6xl">
    <!-- Search Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold mb-4 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            Search
        </h1>
        
        <!-- Search Input -->
        <div class="relative">
            <input type="search" 
                   id="main-search-input"
                   name="q"
                   value="{{search.SearchQuery}}"
                   placeholder="âœ¨ Search for repositories, issues, pull requests, or code..." 
                   class="input input-bordered input-lg w-full pr-12"
                   hx-get="{{host}}/search/results"
                   hx-trigger="input changed delay:500ms, search"
                   hx-target="#search-results"
                   hx-push-url="true"
                   hx-indicator="#main-search-spinner"
                   autofocus>
            <div class="absolute right-3 top-1/2 -translate-y-1/2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-base-content/50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                <span id="main-search-spinner" class="htmx-indicator">
                    <span class="loading loading-spinner loading-md"></span>
                </span>
            </div>
        </div>
        
        <!-- Search Filters -->
        <div class="flex flex-wrap gap-2 mt-4">
            <div class="tabs tabs-boxed">
                <button class="tab {{if or (eq search.SearchType "all") (eq search.SearchType "")}}tab-active{{end}}"
                        hx-get="{{host}}/search/results?q={{search.SearchQuery}}&type=all"
                        hx-target="#search-results"
                        hx-push-url="true">
                    All
                </button>
                <button class="tab {{if eq search.SearchType "repos"}}tab-active{{end}}"
                        hx-get="{{host}}/search/results?q={{search.SearchQuery}}&type=repos"
                        hx-target="#search-results"
                        hx-push-url="true">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                    </svg>
                    Repositories
                </button>
                <button class="tab {{if eq search.SearchType "issues"}}tab-active{{end}}"
                        hx-get="{{host}}/search/results?q={{search.SearchQuery}}&type=issues"
                        hx-target="#search-results"
                        hx-push-url="true">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Issues
                </button>
                <button class="tab {{if eq search.SearchType "prs"}}tab-active{{end}}"
                        hx-get="{{host}}/search/results?q={{search.SearchQuery}}&type=prs"
                        hx-target="#search-results"
                        hx-push-url="true">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                    </svg>
                    Pull Requests
                </button>
                <button class="tab {{if eq search.SearchType "code"}}tab-active{{end}}"
                        hx-get="{{host}}/search/results?q={{search.SearchQuery}}&type=code"
                        hx-target="#search-results"
                        hx-push-url="true">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                    </svg>
                    Code
                </button>
            </div>
        </div>
    </div>
    
    <!-- Search Results -->
    <div id="search-results">
        {{template "search-results.html" .}}
    </div>
</div>

{{template "layout/end"}}